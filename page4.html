
<h1>Функции</h1>

    <div id="accordion1">

    </div>

  <script id="functpl" type="text/html">
	{{#func}}
      <h3><snap class="nambs"></snap>{{name}}</h3>
        <div>	
			<p class="kw00" >{{name_2}}</p>
			<p class="ops">{{opesanie}}</p>
			<p class="m55"><a href="//wiki.secondlife.com/wiki/{{name}}?iframe=true&width=700&height=500" rel="prettyPhoto[iframes]" class="hr" ><img src="img/wiki82.png" width="22" height="22" class="leftimg"><span class="kw01">wiki</span></a></p>	
		</div>
		{{url}}
	{{/func}}
</script>
  
<script>
$(function(){

		$.getJSON("function.json", function(data){
			var template = $('#functpl').html();
			var html = Mustache.render(template,data);
			$('#accordion1').html(html);
			$( "#accordion1" ).accordion({
				heightStyle: "content"
			});
			$('.nambs').each(function (i) {
			    var number = i + 1;
			    $(this).text(number + ".");
			});


			$('.hr').click(function (e) {
			    e.preventDefault(); // Предотвратить href от перенаправления напрямую
			    var linkURL = $(this).attr("href");
			    // $("#my_if").html("<iframe src="+linkURL+" width='100%' height='700' id='my_if1'></iframe>" );
			    //window.location.href = "#start_f";

			    var features = VK.Share.button({ url: linkURL }, { type: "round", text: "Сохранить" });
			    var target = 'Second Life® Wiki';
			    var h = 600;
                var w = 900;
                //window.open(linkURL, "", 'scrollbars=1,height=' + Math.min(h, screen.availHeight) + ',width=' + Math.min(w, screen.availWidth) + ',left=' + Math.max(0, (screen.availWidth - w) / 2) + ',top=' + Math.max(0, (screen.availHeight - h) / 2));
                $.prettyPhoto.open(linkURL, target, features);
                	
                	VK.addCallback("onScroll", onSettingsChanged);
                 		function onSettingsChanged(settings) {
 								console.log('!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! '+settings);
 								var px = settings;
 								console.log('!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! '+px);
								 $( '.pp_pic_holder' ).css( "top", "auto");							 
							};	
                
			});

			
		});
		
});



